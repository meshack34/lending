{% extends "base_officer.html" %}
{% block title %}Dashboard{% endblock %}

{% block officer_content %}
<h2 class="mb-4">Loans</h2>

<form method="get" class="mb-3">
  <select name="status" class="form-select w-auto d-inline-block">
    <option value="">All</option>
    {% for s, label in loan_statuses %}
      <option value="{{ s }}" {% if request.GET.status == s %}selected{% endif %}>{{ label }}</option>
    {% endfor %}
  </select>
  <button class="btn btn-secondary">Filter</button>
</form>

<table class="table table-bordered shadow-sm">
  <thead class="table-light">
    <tr>
      <th>Member</th>
      <th>Amount</th>
      <th>Status</th>
      <th>Applied On</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for loan in loans %}
    <tr>
      <td>{{ loan.member.user.get_full_name }}</td>
      <td>{{ loan.principal_amount }}</td>
      <td>{{ loan.get_status_display }}</td>
      <td>{{ loan.created_at|date:"Y-m-d" }}</td>
      <td>
        <a href="{% url 'officer_loan_detail' loan.id %}" class="btn btn-sm btn-outline-primary">View</a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="5" class="text-center">No loans</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
